# This is a basic workflow to help you get started with Actions

name: JIRA Sync

# Runs when an issue is opened or reopened.
on:
  issues:
    types: [opened, reopened]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Login to Jira
    - name: Login to Jira
      uses: atlassian/gajira-login@master
      env:
        JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
        JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
        JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
      # Create an issue
    - name: Jira Create issue
      uses: atlassian/gajira-create@v2.0.0
      with:
        # Key of the project
        project: PBT
        # Type of the issue to be created. Would need to add in conditionals by the label most likely.
        issuetype: Bug
        # Issue summary
        summary: ${{github.event.issue.title}}
        # Issue description
        description: ${{github.event.issue.body}}
