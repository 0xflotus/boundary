# ***
# WARNING: Do not EDIT or MERGE this file, it is generated by packagespec.
# ***
lockid: 77765297f95ba814
packagespec-version: 0.1.3
cache-version: 8
packages:
- packagespecid: 580141912b3b19366ca56eea8dcbb8b005ff3ee9
  inputs:
    BINARY_NAME: boundary
    BUILD_TAGS: ui
    CGO_ENABLED: "0"
    GOARCH: amd64
    GOOS: darwin
    PRODUCT_NAME: boundary
    PRODUCT_VERSION: 0.0.1-sam-test1
    PRODUCT_VERSION_MMP: 0.0.1
    PRODUCT_VERSION_PRE: sam-test1
  meta:
    BUILD_JOB_NAME: darwin_amd64_package
    BUNDLE_NAME: boundary_0.0.1-sam-test1
    POST_PROCESSORS: apple-notarize av-scan
    builtin:
      BUILD_LAYERS:
      - type: copy-source
        name: 02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def
        archive: .buildcache/archives/02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def.tar.gz
      - type: download-modules
        name: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
        archive: .buildcache/archives/01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c.tar.gz
      - type: install-deps
        name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
        archive: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
      PACKAGE_CACHE_KEY_FILE: .buildcache/cache-keys/package-580141912b3b19366ca56eea8dcbb8b005ff3ee9
    circleci:
      BUILDER_CACHE_KEY_PREFIX_LIST:
      - copy-source_cb2d_{{checksum ".buildcache/cache-keys/copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def"}}
      - download-modules_eb80_{{checksum ".buildcache/cache-keys/download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c"}}
      - install-deps_96bb_{{checksum ".buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737"}}
      PACKAGE_CACHE_KEY: package-580141912b3b19366ca56eea8dcbb8b005ff3ee9-{{checksum
        ".buildcache/cache-keys/package-580141912b3b19366ca56eea8dcbb8b005ff3ee9"}}
  build-command: VERSION_PKG_PATH=github.com/hashicorp/boundary/version; unset GOPATH;
    go build -v -ldflags "-X $VERSION_PKG_PATH.GitCommit=$PACKAGE_SOURCE_ID -X $VERSION_PKG_PATH.Version=0.0.1
    -X $VERSION_PKG_PATH.VersionPrerelease=sam-test1" -o $OUTPUT_DIR/boundary ./cmd/boundary
    && cd $OUTPUT_DIR && zip $PACKAGE_ZIP_NAME boundary
  aliases:
  - type: local
    path: boundary_0.0.1-sam-test1_darwin_amd64.zip
  - type: public-hc-releases
    path: boundary/boundary_0.0.1-sam-test1/boundary_0.0.1-sam-test1_darwin_amd64.zip
- packagespecid: 26ceb6e4a7ebbeff7ef48cfe3d5277a7ed48330c
  inputs:
    BINARY_NAME: boundary
    BUILD_TAGS: ui
    CGO_ENABLED: "0"
    GOARCH: amd64
    GOOS: linux
    PRODUCT_NAME: boundary
    PRODUCT_VERSION: 0.0.1-sam-test1
    PRODUCT_VERSION_MMP: 0.0.1
    PRODUCT_VERSION_PRE: sam-test1
  meta:
    BUILD_JOB_NAME: linux_amd64_package
    BUNDLE_NAME: boundary_0.0.1-sam-test1
    POST_PROCESSORS: av-scan
    builtin:
      BUILD_LAYERS:
      - type: copy-source
        name: 02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def
        archive: .buildcache/archives/02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def.tar.gz
      - type: download-modules
        name: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
        archive: .buildcache/archives/01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c.tar.gz
      - type: install-deps
        name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
        archive: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
      PACKAGE_CACHE_KEY_FILE: .buildcache/cache-keys/package-26ceb6e4a7ebbeff7ef48cfe3d5277a7ed48330c
    circleci:
      BUILDER_CACHE_KEY_PREFIX_LIST:
      - copy-source_cb2d_{{checksum ".buildcache/cache-keys/copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def"}}
      - download-modules_eb80_{{checksum ".buildcache/cache-keys/download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c"}}
      - install-deps_96bb_{{checksum ".buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737"}}
      PACKAGE_CACHE_KEY: package-26ceb6e4a7ebbeff7ef48cfe3d5277a7ed48330c-{{checksum
        ".buildcache/cache-keys/package-26ceb6e4a7ebbeff7ef48cfe3d5277a7ed48330c"}}
  build-command: VERSION_PKG_PATH=github.com/hashicorp/boundary/version; unset GOPATH;
    go build -v -ldflags "-X $VERSION_PKG_PATH.GitCommit=$PACKAGE_SOURCE_ID -X $VERSION_PKG_PATH.Version=0.0.1
    -X $VERSION_PKG_PATH.VersionPrerelease=sam-test1" -o $OUTPUT_DIR/boundary ./cmd/boundary
    && cd $OUTPUT_DIR && zip $PACKAGE_ZIP_NAME boundary
  aliases:
  - type: local
    path: boundary_0.0.1-sam-test1_linux_amd64.zip
  - type: public-hc-releases
    path: boundary/boundary_0.0.1-sam-test1/boundary_0.0.1-sam-test1_linux_amd64.zip
base-image: golang@sha256:21408f9e65fbd1fac28d8a6788485a74f9029fece0086a25d1eaf1d8cc79b7ad
layers:
- depth: 0
  final: false
  type: install-deps
  id: 96bbfeaab51d40cfb3c45afc0035516c11d6d737
  name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
  parentname: ""
  parenttype: ""
  parentid: ""
  cachekeyfile: .buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
  sourceinclude: ""
  sourceexclude: ""
  archivefile: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
  dockerfile: |
    FROM golang@sha256:21408f9e65fbd1fac28d8a6788485a74f9029fece0086a25d1eaf1d8cc79b7ad
    COPY . ./
    RUN apt-get update -y && apt-get install -yq zip
  meta:
    builtin:
      LAYER_LIST:
      - type: install-deps
        name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
        archive: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
    circleci:
      CACHE_KEY_PREFIX_LIST:
      - install-deps_96bb_{{checksum ".buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737"}}
  childcount: 1
- depth: 1
  final: false
  type: download-modules
  id: eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
  name: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
  parentname: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
  parenttype: install-deps
  parentid: 96bbfeaab51d40cfb3c45afc0035516c11d6d737
  cachekeyfile: .buildcache/cache-keys/download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
  sourceinclude: go.mod go.sum
  sourceexclude: ""
  archivefile: .buildcache/archives/01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c.tar.gz
  dockerfile: |
    # syntax=docker/dockerfile:1.1.7-experimental
    ARG BASE_IMAGE
    FROM $BASE_IMAGE
    COPY . ./
    ENV GOPATH=
    ENV GOPRIVATE=github.com/hashicorp/*
    RUN mkdir -m 700 /root/.ssh; \
      touch -m 600 /root/.ssh/known_hosts; \
      ssh-keyscan github.com > /root/.ssh/known_hosts
    RUN git config --global url."git@github.com:".insteadOf https://github.com/
    RUN --mount=type=ssh go mod download -x
  meta:
    builtin:
      LAYER_LIST:
      - type: download-modules
        name: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
        archive: .buildcache/archives/01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c.tar.gz
      - type: install-deps
        name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
        archive: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
    circleci:
      CACHE_KEY_PREFIX_LIST:
      - download-modules_eb80_{{checksum ".buildcache/cache-keys/download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c"}}
      - install-deps_96bb_{{checksum ".buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737"}}
  childcount: 1
- depth: 2
  final: true
  type: copy-source
  id: cb2d5919f5b68088a1068bd1bc610eb63dc06def
  name: 02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def
  parentname: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
  parenttype: download-modules
  parentid: eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
  cachekeyfile: .buildcache/cache-keys/copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def
  sourceinclude: '*.go'
  sourceexclude: ""
  archivefile: .buildcache/archives/02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def.tar.gz
  dockerfile: |
    # syntax=docker/dockerfile:1.1.7-experimental
    ARG BASE_IMAGE
    FROM $BASE_IMAGE
    COPY . ./
  meta:
    builtin:
      LAYER_LIST:
      - type: copy-source
        name: 02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def
        archive: .buildcache/archives/02-copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def.tar.gz
      - type: download-modules
        name: 01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c
        archive: .buildcache/archives/01-download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c.tar.gz
      - type: install-deps
        name: 00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737
        archive: .buildcache/archives/00-install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737.tar.gz
    circleci:
      CACHE_KEY_PREFIX_LIST:
      - copy-source_cb2d_{{checksum ".buildcache/cache-keys/copy-source-cb2d5919f5b68088a1068bd1bc610eb63dc06def"}}
      - download-modules_eb80_{{checksum ".buildcache/cache-keys/download-modules-eb80c020d26fa5a44b8e8bf9cc6a41d328e82f4c"}}
      - install-deps_96bb_{{checksum ".buildcache/cache-keys/install-deps-96bbfeaab51d40cfb3c45afc0035516c11d6d737"}}
  childcount: 0
